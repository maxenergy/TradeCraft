# 📋 TradeCraft 未完成任务清单

**更新日期**: 2025-11-26  
**项目完成度**: 35%  
**MVP阻塞任务**: 5个

---

## 🔴 P0级任务 (MVP阻塞 - 必须立即完成)

### 1. AI内容生成服务 (预计2周)
**当前状态**: 0% - 仅有接口框架

#### 任务清单:
- [ ] 集成百度文心一言API
  - [ ] 注册获取API Key
  - [ ] 实现SDK调用逻辑
  - [ ] 实现中文商品描述生成
  - [ ] 实现SEO优化内容生成
- [ ] 集成GLM-4 API
  - [ ] 注册获取API Key
  - [ ] 实现SDK调用逻辑
  - [ ] 实现英文商品描述生成
- [ ] 集成Azure Translator
  - [ ] 创建Azure翻译资源
  - [ ] 获取API Key
  - [ ] 实现翻译API调用
  - [ ] 实现中文→印尼语翻译
  - [ ] 实现英文→印尼语翻译
- [ ] 实现质量检查机制
  - [ ] 敏感词过滤
  - [ ] 内容长度验证
  - [ ] 格式化检查
- [ ] 实现缓存机制
  - [ ] Redis缓存生成结果
  - [ ] 缓存失效策略
- [ ] 后端API集成
  - [ ] 创建ProductAIController
  - [ ] 实现"一键生成"功能
  - [ ] 前端调用集成

**依赖**: API密钥申请  
**阻塞**: 商品多语言描述功能

---

### 2. 图片上传服务 (预计1周)
**当前状态**: 0% - 完全未实现

#### 任务清单:
- [ ] 阿里云OSS配置
  - [ ] 创建OSS Bucket
  - [ ] 获取AccessKey
  - [ ] 配置CORS规则
  - [ ] 配置CDN加速
- [ ] 后端图片上传API
  - [ ] 创建FileUploadController
  - [ ] 实现单图上传 (POST /api/v1/files/upload)
  - [ ] 实现多图上传
  - [ ] 图片格式验证 (jpg, png, webp)
  - [ ] 文件大小限制 (5MB)
  - [ ] 生成缩略图
  - [ ] 返回CDN URL
- [ ] 前端上传组件
  - [ ] 创建ImageUpload组件
  - [ ] 拖拽上传
  - [ ] 图片预览
  - [ ] 上传进度条
  - [ ] 错误处理
- [ ] 图片管理
  - [ ] 图片列表查询
  - [ ] 图片删除API
  - [ ] OSS清理机制

**依赖**: 阿里云账号、OSS服务  
**阻塞**: 商品图片展示功能

---

### 3. 支付集成 (预计2周)
**当前状态**: 0% - 完全未实现

#### 任务清单:
- [ ] Stripe支付集成
  - [ ] 注册Stripe账号
  - [ ] 获取API密钥 (测试环境)
  - [ ] 添加Stripe Java SDK依赖
  - [ ] 创建PaymentController
  - [ ] 实现创建支付意图 (Payment Intent)
  - [ ] 实现支付确认
  - [ ] 实现Webhook处理
  - [ ] 支付成功/失败回调
  - [ ] 前端Stripe Elements集成
- [ ] PayPal支付集成
  - [ ] 注册PayPal开发者账号
  - [ ] 获取Client ID和Secret
  - [ ] 添加PayPal SDK依赖
  - [ ] 实现创建订单API
  - [ ] 实现支付捕获
  - [ ] 实现Webhook处理
  - [ ] 前端PayPal Button集成
- [ ] 货到付款(COD)
  - [ ] 实现COD订单创建
  - [ ] COD订单状态管理
  - [ ] COD配送地区限制
- [ ] 订单状态同步
  - [ ] 支付成功 → 订单确认
  - [ ] 支付失败 → 订单取消
  - [ ] 库存扣减
  - [ ] 邮件通知
- [ ] 退款功能
  - [ ] Stripe退款API
  - [ ] PayPal退款API
  - [ ] 部分退款
  - [ ] 全额退款

**依赖**: Stripe账号、PayPal开发者账号  
**阻塞**: 完整购物流程

---

### 4. 国际化(i18n) (预计1.5周)
**当前状态**: 0% - 完全未实现

#### 任务清单:
- [ ] next-intl配置
  - [ ] 安装next-intl依赖
  - [ ] 配置i18n.ts
  - [ ] 配置middleware.ts路由
  - [ ] 配置支持的语言 (zh, en, id)
- [ ] 多语言资源文件
  - [ ] 创建messages/zh.json (中文)
  - [ ] 创建messages/en.json (英文)
  - [ ] 创建messages/id.json (印尼语)
  - [ ] 翻译通用文案 (按钮、标签、提示等)
  - [ ] 翻译错误消息
  - [ ] 翻译表单验证消息
- [ ] 语言切换组件
  - [ ] 创建LanguageSwitcher组件
  - [ ] 显示当前语言
  - [ ] 语言切换下拉菜单
  - [ ] 切换后URL重定向
  - [ ] 保存用户语言偏好到Cookie
- [ ] 多语言路由
  - [ ] /zh/* 中文路由
  - [ ] /en/* 英文路由
  - [ ] /id/* 印尼语路由
  - [ ] 默认语言重定向
- [ ] 货币切换
  - [ ] 创建CurrencySwitcher组件
  - [ ] 支持货币: CNY, USD, IDR, MYR
  - [ ] 实时汇率API集成
  - [ ] 价格自动转换
  - [ ] 货币格式化显示
- [ ] 数据库多语言支持
  - [ ] Product表多语言字段
  - [ ] Category表多语言字段
  - [ ] 查询时根据语言返回对应内容

**依赖**: Azure Translator (翻译资源文件)  
**阻塞**: 东南亚市场支持

---

### 5. 前端UI组件完善 (预计2周)
**当前状态**: 30% - 页面存在但内容空白

#### 任务清单:
- [ ] 首页组件
  - [ ] Hero Banner轮播图
  - [ ] 分类导航栏
  - [ ] 精选商品网格
  - [ ] 热门商品列表
  - [ ] 促销活动Banner
- [ ] 商品列表页
  - [ ] 产品卡片组件 (ProductCard)
  - [ ] 筛选侧边栏 (Filters)
  - [ ] 排序下拉菜单
  - [ ] 分页组件
  - [ ] 价格范围滑块
  - [ ] 分类多选框
- [ ] 商品详情页
  - [ ] 图片画廊 (主图+缩略图)
  - [ ] 产品信息展示
  - [ ] 规格选择器 (尺寸、颜色等)
  - [ ] 数量选择器
  - [ ] 加入购物车按钮
  - [ ] 立即购买按钮
  - [ ] 商品描述Tab (详情/规格/评价)
- [ ] 购物车组件
  - [ ] 购物车商品列表
  - [ ] 数量修改按钮
  - [ ] 删除商品按钮
  - [ ] 价格汇总
  - [ ] 结算按钮
  - [ ] 空购物车提示
- [ ] 结账流程
  - [ ] 收货地址表单
  - [ ] 配送方式选择
  - [ ] 支付方式选择 (Stripe/PayPal/COD)
  - [ ] 订单摘要
  - [ ] 提交订单按钮
- [ ] 用户中心
  - [ ] 个人信息编辑
  - [ ] 订单列表
  - [ ] 订单详情页
  - [ ] 地址管理
  - [ ] 收藏商品
- [ ] 管理后台
  - [ ] 商品管理列表
  - [ ] 商品编辑表单
  - [ ] AI内容生成按钮
  - [ ] 图片上传组件
  - [ ] 订单管理列表
  - [ ] 用户管理列表

**依赖**: API客户端、状态管理  
**阻塞**: 完整用户体验

---

## 🟡 P1级任务 (重要 - 本月内完成)

### 6. API客户端封装 (预计3天)
- [ ] 创建统一的API客户端类
- [ ] 实现请求/响应拦截器
- [ ] Token自动注入
- [ ] Token过期自动刷新
- [ ] 统一错误处理
- [ ] 请求重试机制
- [ ] 加载状态管理
- [ ] TypeScript类型定义

### 7. 状态管理完善 (预计3天)
- [ ] 创建UserStore (用户状态)
- [ ] 创建CartStore (购物车状态)
- [ ] 创建ProductStore (产品状态)
- [ ] 创建OrderStore (订单状态)
- [ ] 持久化配置 (LocalStorage)
- [ ] 状态同步机制

### 8. Redis缓存实现 (预计4天)
- [ ] 产品列表缓存
- [ ] 产品详情缓存
- [ ] 分类缓存
- [ ] 用户会话缓存
- [ ] 购物车缓存
- [ ] 汇率缓存 (每小时更新)
- [ ] 缓存预热脚本
- [ ] 缓存失效策略

### 9. 邮件通知服务 (预计3天)
- [ ] 集成邮件服务 (推荐SendGrid或AWS SES)
- [ ] 创建邮件模板
  - [ ] 注册欢迎邮件
  - [ ] 订单确认邮件
  - [ ] 发货通知邮件
  - [ ] 密码重置邮件
- [ ] 异步发送队列 (Celery/RabbitMQ)
- [ ] 邮件发送日志

### 10. 搜索引擎集成 (预计1周)
- [ ] 安装Meilisearch
- [ ] 产品索引创建
- [ ] 索引字段配置 (title, description, tags)
- [ ] 全文搜索API
- [ ] 搜索建议API
- [ ] 高亮关键词
- [ ] 搜索过滤器 (价格、分类、品牌)
- [ ] 搜索排序
- [ ] 数据同步机制

### 11. 表单验证 (预计2天)
- [ ] 安装React Hook Form
- [ ] 安装Zod
- [ ] 定义验证Schema
  - [ ] 登录表单
  - [ ] 注册表单
  - [ ] 商品表单
  - [ ] 地址表单
  - [ ] 结账表单
- [ ] 错误消息国际化
- [ ] 异步验证 (用户名唯一性等)

### 12. 数据库优化 (预计2天)
- [ ] 添加索引
  - [ ] product.sku 唯一索引
  - [ ] product.category_id 索引
  - [ ] product.status 索引
  - [ ] order.user_id 索引
  - [ ] order.created_at 索引
- [ ] 完整的Flyway迁移脚本
- [ ] 测试数据种子文件
  - [ ] 示例用户
  - [ ] 示例分类
  - [ ] 示例商品 (50个)
  - [ ] 示例订单

---

## 🟢 P2级任务 (可选 - MVP后迭代)

### 13. 测试覆盖 (预计2周)
- [ ] 后端单元测试
  - [ ] Service层测试 (覆盖率>80%)
  - [ ] Controller层测试
  - [ ] Repository层测试
- [ ] 前端测试
  - [ ] 组件测试 (React Testing Library)
  - [ ] Store测试
  - [ ] Hook测试
- [ ] 集成测试
  - [ ] API集成测试
  - [ ] 数据库集成测试
- [ ] E2E测试
  - [ ] 用户注册登录流程
  - [ ] 完整购物流程
  - [ ] 订单支付流程

### 14. 数据分析Dashboard (预计1周)
- [ ] Google Analytics 4集成
- [ ] 销售报表页面
  - [ ] 今日销售额
  - [ ] 本周销售额
  - [ ] 本月销售额
  - [ ] 销售趋势图表 (ECharts/Chart.js)
- [ ] 用户行为分析
  - [ ] 访问量统计
  - [ ] 用户来源分析
  - [ ] 转化率分析
- [ ] 产品分析
  - [ ] 热销产品Top 10
  - [ ] 库存预警
  - [ ] 商品评分

### 15. 性能优化
- [ ] 前端优化
  - [ ] 图片懒加载
  - [ ] 代码分割 (Code Splitting)
  - [ ] 预加载关键资源
  - [ ] 静态资源压缩
  - [ ] CDN配置
- [ ] 后端优化
  - [ ] 数据库查询优化
  - [ ] N+1查询问题解决
  - [ ] 连接池配置
  - [ ] 响应压缩

### 16. Docker生产配置
- [ ] 多阶段构建优化
- [ ] 健康检查配置
- [ ] 资源限制配置
- [ ] 日志输出优化
- [ ] 环境变量管理
- [ ] Docker Compose生产配置

### 17. 监控和日志
- [ ] 应用监控 (Prometheus + Grafana)
- [ ] 日志聚合 (ELK Stack)
- [ ] 错误追踪 (Sentry)
- [ ] 性能监控 (APM)

---

## 📊 任务统计

| 优先级 | 任务数 | 预计工时 | 状态 |
|--------|--------|----------|------|
| **P0 (MVP阻塞)** | 5个主任务 | 8.5周 | ❌ 未开始 |
| **P1 (重要)** | 7个主任务 | 3.5周 | ❌ 未开始 |
| **P2 (可选)** | 5个主任务 | 5周 | ❌ 未开始 |
| **总计** | 17个主任务 | 17周 | - |

---

## 🎯 建议执行顺序

### 第1-2周: 核心基础设施
1. 图片上传服务 (1周)
2. API客户端封装 (3天)
3. 状态管理完善 (3天)

### 第3-4周: AI功能
4. AI内容生成服务 (2周)

### 第5-6周: 国际化和UI
5. 国际化(i18n) (1.5周)
6. 前端UI组件 (2周，与i18n并行)

### 第7-8周: 支付和表单
7. 支付集成 (2周)
8. 表单验证 (2天，与支付并行)

### 第9-10周: 优化和完善
9. Redis缓存 (4天)
10. 邮件服务 (3天)
11. 搜索引擎 (1周)
12. 数据库优化 (2天)

### 第11-12周: 测试和部署
13. 测试覆盖 (2周)
14. Docker生产配置
15. MVP验收测试

---

## ⚠️ 关键风险

1. **API密钥申请延迟**
   - 文心一言、GLM-4、Azure Translator审批需要1-3天
   - 建议立即开始申请

2. **支付网关审核**
   - Stripe/PayPal账号审核可能需要数天
   - 建议先使用测试模式开发

3. **阿里云资源费用**
   - OSS存储和CDN流量需要预算
   - 建议先使用按量付费

4. **开发人力不足**
   - 17周工作量，1人开发压力大
   - 建议考虑增加1名前端开发

---

## 📅 里程碑检查点

- **Week 2**: 图片上传和API客户端完成
- **Week 4**: AI功能可用
- **Week 6**: 多语言前端可访问
- **Week 8**: 支付流程可测试
- **Week 10**: 所有P0和P1功能完成
- **Week 12**: MVP验收通过，可上线

---

**创建日期**: 2025-11-26  
**最后更新**: 2025-11-26  
**负责人**: 开发团队  
**审核人**: 项目经理
